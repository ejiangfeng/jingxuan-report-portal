# é²¸é€‰è‡ªåŠ©æŠ¥è¡¨å¹³å° - åŠŸèƒ½æµ‹è¯•æ¸…å•

**æµ‹è¯•æ—¥æœŸ**: 2026-02-25  
**æµ‹è¯•ç¯å¢ƒ**: Docker + OceanBase çœŸå®æ•°æ®åº“  
**å‰ç½®æ¡ä»¶**: Docker å®ˆæŠ¤è¿›ç¨‹éœ€è¦è¿è¡Œ

---

## ğŸ”§ æµ‹è¯•å‰å‡†å¤‡

### 1. å¯åŠ¨ Docker æœåŠ¡
```bash
# æ£€æŸ¥ Docker çŠ¶æ€
docker ps

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨ Docker Desktop
open -a Docker
```

### 2. å¯åŠ¨é¡¹ç›®æœåŠ¡
```bash
cd /Users/ejiangfeng/ai-jx-report/jingxuan-report-portal
docker-compose -f docker-compose.simple.yml up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker ps --filter "name=jingxuan"
```

### 3. ç­‰å¾…æœåŠ¡å°±ç»ªï¼ˆçº¦ 10 ç§’ï¼‰
```bash
sleep 10
curl http://localhost:4000/api/v1/health
```

---

## âœ… åŠŸèƒ½æµ‹è¯•æ¸…å•

### ä¸€ã€åŸºç¡€æœåŠ¡æµ‹è¯•

#### 1. å¥åº·æ£€æŸ¥
```bash
curl -s http://localhost:4000/api/v1/health | python3 -m json.tool
```
**é¢„æœŸç»“æœ**: `{"status": "ok"}`

#### 2. å‰ç«¯é¡µé¢è®¿é—®
```bash
curl -s http://localhost:7788 | grep "<title>"
```
**é¢„æœŸç»“æœ**: åŒ…å«"é²¸é€‰è‡ªåŠ©æŠ¥è¡¨å¹³å°"

---

### äºŒã€æŠ¥è¡¨æŸ¥è¯¢æµ‹è¯•

#### 3. è®¢å•æŸ¥è¯¢
```bash
curl -s -X POST http://localhost:4000/api/v1/orders/query \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-01","endTime":"2026-02-25","page":1,"pageSize":5}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… è®¢å•æŸ¥è¯¢:', 'PASS' if d.get('success') else 'FAIL')"
```
**é¢„æœŸ**: è¿”å›è®¢å•åˆ—è¡¨ï¼Œæ˜¾ç¤ºæˆåŠŸ=true

#### 4. å•†å“æ¸—é€ç‡æŸ¥è¯¢
```bash
curl -s -X POST http://localhost:4000/api/v1/reports/product-penetration \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-24","endTime":"2026-02-25","stationCodes":"2625","page":1,"pageSize":5}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… å•†å“æ¸—é€ç‡:', 'PASS' if d.get('success') else 'FAIL')"
```
**é¢„æœŸ**: è¿”å›å•†å“æ¸—é€ç‡æ•°æ®

#### 5. ä¼˜æƒ åˆ¸é¢†ç”¨æ ¸é”€æŸ¥è¯¢
```bash
curl -s -X POST http://localhost:4000/api/v1/reports/coupon-query \
  -H "Content-Type: application/json" \
  -d '{"receiveStartTime":"2026-02-01","receiveEndTime":"2026-02-25","page":1,"pageSize":5}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… ä¼˜æƒ åˆ¸æŸ¥è¯¢:', 'PASS' if d.get('success') else 'FAIL')"
```
**é¢„æœŸ**: è¿”å›ä¼˜æƒ åˆ¸æ•°æ®

#### 6. å…è¿æ´»åŠ¨æŸ¥è¯¢
```bash
curl -s -X POST http://localhost:4000/api/v1/reports/freight-activity \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-01","endTime":"2026-02-25","page":1,"pageSize":5}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… å…è¿æ´»åŠ¨:', 'PASS' if d.get('success') else 'FAIL')"
```
**é¢„æœŸ**: è¿”å›å…è¿æ´»åŠ¨æ•°æ®

#### 7. ç¤¾ç¾¤æ‹‰æ–°æŸ¥è¯¢
```bash
curl -s -X POST http://localhost:4000/api/v1/reports/invitation \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-01","endTime":"2026-02-25","activityId":"32","page":1,"pageSize":5}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… ç¤¾ç¾¤æ‹‰æ–°:', 'PASS' if d.get('success') else 'FAIL')"
```
**é¢„æœŸ**: è¿”å›ç¤¾ç¾¤æ‹‰æ–°æ•°æ®

#### 8. å•†åŸç”¨æˆ·ä¸‹å•æŸ¥è¯¢
```bash
curl -s -X POST http://localhost:4000/api/v1/reports/mall-user \
  -H "Content-Type: application/json" \
  -d '{"queryDate":"2026-02-24","page":1,"pageSize":5}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… å•†åŸç”¨æˆ·ä¸‹å•:', 'PASS' if d.get('success') else 'FAIL')"
```
**é¢„æœŸ**: è¿”å›å•†åŸç”¨æˆ·ä¸‹å•æ•°æ®

---

### ä¸‰ã€å¯¼å‡ºåŠŸèƒ½æµ‹è¯•

#### 9. è®¢å•å¯¼å‡º
```bash
# åˆ›å»ºå¯¼å‡ºä»»åŠ¡
TASK_ID=$(curl -s -X POST http://localhost:4000/api/v1/orders/export \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-24","endTime":"2026-02-25"}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print(d.get('data',{}).get('id',''))")

echo "è®¢å•å¯¼å‡ºä»»åŠ¡ ID: $TASK_ID"

# ç­‰å¾… 30 ç§’åæ£€æŸ¥çŠ¶æ€
sleep 30
curl -s http://localhost:4000/api/v1/exports/$TASK_ID | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… è®¢å•å¯¼å‡º:', 'PASS' if d.get('data',{}).get('status')=='completed' else 'FAIL')"
```
**é¢„æœŸ**: å¯¼å‡ºä»»åŠ¡å®Œæˆï¼ŒçŠ¶æ€=completed

#### 10. å•†å“æ¸—é€ç‡å¯¼å‡º
```bash
TASK_ID=$(curl -s -X POST http://localhost:4000/api/v1/reports/product-penetration/export \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-24","endTime":"2026-02-25","stationCodes":"2625"}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print(d.get('data',{}).get('id',''))")

echo "å•†å“æ¸—é€ç‡å¯¼å‡ºä»»åŠ¡ ID: $TASK_ID"
sleep 30
curl -s http://localhost:4000/api/v1/exports/$TASK_ID | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… å•†å“æ¸—é€ç‡å¯¼å‡º:', 'PASS' if d.get('data',{}).get('status')=='completed' else 'FAIL')"
```
**é¢„æœŸ**: å¯¼å‡ºä»»åŠ¡å®Œæˆ

#### 11. ä¼˜æƒ åˆ¸å¯¼å‡º
```bash
TASK_ID=$(curl -s -X POST http://localhost:4000/api/v1/reports/coupon-query/export \
  -H "Content-Type: application/json" \
  -d '{"receiveStartTime":"2026-02-01","receiveEndTime":"2026-02-25"}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print(d.get('data',{}).get('id',''))")

echo "ä¼˜æƒ åˆ¸å¯¼å‡ºä»»åŠ¡ ID: $TASK_ID"
sleep 60
curl -s http://localhost:4000/api/v1/exports/$TASK_ID | python3 -c "import sys,json; d=json.load(sys.stdin); print('âœ… ä¼˜æƒ åˆ¸å¯¼å‡º:', 'PASS' if d.get('data',{}).get('status')=='completed' else 'FAIL')"
```
**é¢„æœŸ**: å¯¼å‡ºä»»åŠ¡å®Œæˆï¼ˆå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´ï¼‰

---

### å››ã€å‰ç«¯åŠŸèƒ½æµ‹è¯•

#### 12. å‰ç«¯é¡µé¢åŠ è½½
**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤**:
1. æµè§ˆå™¨è®¿é—® http://localhost:7788
2. æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
3. æ£€æŸ¥é¡¶éƒ¨å¯¼èˆªæ˜¯å¦æ˜¾ç¤º 6 ä¸ªæŠ¥è¡¨

**é¢„æœŸ**: 
- âœ… é¡µé¢æ­£å¸¸æ˜¾ç¤º
- âœ… 6 ä¸ªæŠ¥è¡¨å¯¼èˆªå¯è§ï¼š
  - ğŸ“‹ è®¢å•æŸ¥è¯¢
  - ğŸ“ˆ å•†å“æ¸—é€ç‡
  - ğŸ« ä¼˜æƒ åˆ¸é¢†ç”¨æ ¸é”€
  - ğŸšš å…è¿æ´»åŠ¨æŸ¥è¯¢
  - ğŸ‘¥ ç¤¾ç¾¤æ‹‰æ–°
  - ğŸ›’ å•†åŸç”¨æˆ·ä¸‹å•

#### 13. æŠ¥è¡¨åˆ‡æ¢æµ‹è¯•
**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤**:
1. ç‚¹å‡»æ¯ä¸ªæŠ¥è¡¨å¯¼èˆª
2. æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£ç¡®åˆ‡æ¢

**é¢„æœŸ**: æ¯ä¸ªæŠ¥è¡¨é¡µé¢éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º

#### 14. æŸ¥è¯¢åŠŸèƒ½æµ‹è¯•
**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤** (æ¯ä¸ªæŠ¥è¡¨):
1. å¡«å†™ç­›é€‰æ¡ä»¶
2. ç‚¹å‡»"æŸ¥è¯¢æŠ¥è¡¨"
3. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ

**é¢„æœŸ**: æ˜¾ç¤ºæŸ¥è¯¢ç»“æœå’Œè®°å½•æ•°

#### 15. å¯¼å‡ºåŠŸèƒ½æµ‹è¯•
**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤** (æ¯ä¸ªæŠ¥è¡¨):
1. å¡«å†™ç­›é€‰æ¡ä»¶
2. ç‚¹å‡»"å¯¼å‡ºæŸ¥è¯¢ç»“æœ"
3. ç­‰å¾…å¯¼å‡ºå®Œæˆæç¤º
4. ç‚¹å‡»"ğŸ“‹ å¯¼å‡ºä»»åŠ¡"
5. æ£€æŸ¥å¯¼å‡ºçŠ¶æ€
6. ä¸‹è½½æ–‡ä»¶

**é¢„æœŸ**: 
- å¯¼å‡ºä»»åŠ¡åˆ›å»ºæˆåŠŸ
- çŠ¶æ€å˜ä¸º"å·²å®Œæˆ"
- å¯ä»¥ä¸‹è½½ Excel/ZIP æ–‡ä»¶

---

### äº”ã€æ—¶é—´æ˜¾ç¤ºæµ‹è¯•

#### 16. è®¢å•æ—¶é—´æ˜¾ç¤º
**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤**:
1. è®¢å•æŸ¥è¯¢ â†’ æŸ¥è¯¢ç»“æœ
2. æ£€æŸ¥"ä¸‹å•æ—¶é—´"åˆ—

**é¢„æœŸ**: æ˜¾ç¤ºåŒ—äº¬æ—¶é—´ï¼ˆæ ¼å¼ï¼š2026/02/25 14:30ï¼‰

#### 17. å¯¼å‡ºä»»åŠ¡æ—¶é—´æ˜¾ç¤º
**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤**:
1. åˆ›å»ºå¯¼å‡ºä»»åŠ¡
2. ç‚¹å‡»"ğŸ“‹ å¯¼å‡ºä»»åŠ¡"
3. æ£€æŸ¥"åˆ›å»ºæ—¶é—´"

**é¢„æœŸ**: æ˜¾ç¤ºåŒ—äº¬æ—¶é—´

---

## ğŸ“Š æµ‹è¯•ç»“æœè®°å½•è¡¨

| åºå· | åŠŸèƒ½åç§° | æµ‹è¯•ç»“æœ | å¤‡æ³¨ |
|------|---------|---------|------|
| 1 | å¥åº·æ£€æŸ¥ | â³ å¾…æµ‹è¯• | |
| 2 | å‰ç«¯é¡µé¢è®¿é—® | â³ å¾…æµ‹è¯• | |
| 3 | è®¢å•æŸ¥è¯¢ | â³ å¾…æµ‹è¯• | |
| 4 | å•†å“æ¸—é€ç‡æŸ¥è¯¢ | â³ å¾…æµ‹è¯• | |
| 5 | ä¼˜æƒ åˆ¸æŸ¥è¯¢ | â³ å¾…æµ‹è¯• | |
| 6 | å…è¿æ´»åŠ¨æŸ¥è¯¢ | â³ å¾…æµ‹è¯• | |
| 7 | ç¤¾ç¾¤æ‹‰æ–°æŸ¥è¯¢ | â³ å¾…æµ‹è¯• | |
| 8 | å•†åŸç”¨æˆ·ä¸‹å•æŸ¥è¯¢ | â³ å¾…æµ‹è¯• | |
| 9 | è®¢å•å¯¼å‡º | â³ å¾…æµ‹è¯• | |
| 10 | å•†å“æ¸—é€ç‡å¯¼å‡º | â³ å¾…æµ‹è¯• | |
| 11 | ä¼˜æƒ åˆ¸å¯¼å‡º | â³ å¾…æµ‹è¯• | |
| 12 | å‰ç«¯é¡µé¢åŠ è½½ | â³ å¾…æµ‹è¯• | æ‰‹åŠ¨ |
| 13 | æŠ¥è¡¨åˆ‡æ¢ | â³ å¾…æµ‹è¯• | æ‰‹åŠ¨ |
| 14 | æŸ¥è¯¢åŠŸèƒ½ | â³ å¾…æµ‹è¯• | æ‰‹åŠ¨ |
| 15 | å¯¼å‡ºåŠŸèƒ½ | â³ å¾…æµ‹è¯• | æ‰‹åŠ¨ |
| 16 | è®¢å•æ—¶é—´æ˜¾ç¤º | â³ å¾…æµ‹è¯• | æ‰‹åŠ¨ |
| 17 | å¯¼å‡ºä»»åŠ¡æ—¶é—´ | â³ å¾…æµ‹è¯• | æ‰‹åŠ¨ |

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•è„šæœ¬

### ä¸€é”®æµ‹è¯•æ‰€æœ‰ API
```bash
#!/bin/bash
cd /Users/ejiangfeng/ai-jx-report/jingxuan-report-portal

echo "========================================="
echo "  é²¸é€‰è‡ªåŠ©æŠ¥è¡¨å¹³å° - åŠŸèƒ½æµ‹è¯•"
echo "========================================="

# å¥åº·æ£€æŸ¥
echo -e "\n1ï¸âƒ£  å¥åº·æ£€æŸ¥..."
curl -s http://localhost:4000/api/v1/health | python3 -m json.tool

# è®¢å•æŸ¥è¯¢
echo -e "\n2ï¸âƒ£  è®¢å•æŸ¥è¯¢..."
curl -s -X POST http://localhost:4000/api/v1/orders/query \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-01","endTime":"2026-02-25","page":1,"pageSize":2}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('çŠ¶æ€:', 'âœ… PASS' if d.get('success') else 'âŒ FAIL')"

# å•†å“æ¸—é€ç‡
echo -e "\n3ï¸âƒ£  å•†å“æ¸—é€ç‡..."
curl -s -X POST http://localhost:4000/api/v1/reports/product-penetration \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-24","endTime":"2026-02-25","stationCodes":"2625","page":1,"pageSize":2}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('çŠ¶æ€:', 'âœ… PASS' if d.get('success') else 'âŒ FAIL')"

# ä¼˜æƒ åˆ¸æŸ¥è¯¢
echo -e "\n4ï¸âƒ£  ä¼˜æƒ åˆ¸æŸ¥è¯¢..."
curl -s -X POST http://localhost:4000/api/v1/reports/coupon-query \
  -H "Content-Type: application/json" \
  -d '{"receiveStartTime":"2026-02-01","receiveEndTime":"2026-02-25","page":1,"pageSize":2}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('çŠ¶æ€:', 'âœ… PASS' if d.get('success') else 'âŒ FAIL')"

# å…è¿æ´»åŠ¨
echo -e "\n5ï¸âƒ£  å…è¿æ´»åŠ¨..."
curl -s -X POST http://localhost:4000/api/v1/reports/freight-activity \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-01","endTime":"2026-02-25","page":1,"pageSize":2}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('çŠ¶æ€:', 'âœ… PASS' if d.get('success') else 'âŒ FAIL')"

# ç¤¾ç¾¤æ‹‰æ–°
echo -e "\n6ï¸âƒ£  ç¤¾ç¾¤æ‹‰æ–°..."
curl -s -X POST http://localhost:4000/api/v1/reports/invitation \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2026-02-01","endTime":"2026-02-25","activityId":"32","page":1,"pageSize":2}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('çŠ¶æ€:', 'âœ… PASS' if d.get('success') else 'âŒ FAIL')"

# å•†åŸç”¨æˆ·
echo -e "\n7ï¸âƒ£  å•†åŸç”¨æˆ·ä¸‹å•..."
curl -s -X POST http://localhost:4000/api/v1/reports/mall-user \
  -H "Content-Type: application/json" \
  -d '{"queryDate":"2026-02-24","page":1,"pageSize":2}' \
  | python3 -c "import sys,json; d=json.load(sys.stdin); print('çŠ¶æ€:', 'âœ… PASS' if d.get('success') else 'âŒ FAIL')"

echo -e "\n========================================="
echo "  API æµ‹è¯•å®Œæˆï¼"
echo "========================================="
```

ä¿å­˜ä¸º `test-all-features.sh`ï¼Œæ‰§è¡Œï¼š
```bash
chmod +x test-all-features.sh
./test-all-features.sh
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: Docker æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
docker ps

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨ Docker Desktop
open -a Docker
```

### Q2: æœåŠ¡æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps --filter "name=jingxuan"

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.simple.yml restart
```

### Q3: API è¿”å›é”™è¯¯
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
docker logs jingxuan-backend --tail 50

# å¸¸è§é”™è¯¯ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
# è§£å†³ï¼šæ£€æŸ¥ .env é…ç½®ï¼Œç¡®è®¤æ•°æ®åº“å¯è®¿é—®
```

---

## ğŸ“ æµ‹è¯•å®Œæˆç¡®è®¤

**æµ‹è¯•äººå‘˜**: ___________  
**æµ‹è¯•æ—¥æœŸ**: ___________  
**æµ‹è¯•ç»“æœ**: â˜ å…¨éƒ¨é€šè¿‡  â˜ éƒ¨åˆ†é€šè¿‡  â˜ æœªé€šè¿‡  
**å¤‡æ³¨**: ___________

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-25
